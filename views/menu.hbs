{{!-- setting title --}}
<script> document.title = 'Week Menu' </script>


<div class="container mt-4">
    <div class="row">
        <div class="col-sm-10">
            <h2 class="text-center">Week Meals</h2>
        </div>
        {{#if session.user.admin}}
        <div class="col-sm-2">
            <button type="button" class=" btn-outline-secondary btn btn-md" data-toggle="modal" data-target="#addModal">
                Add A New Meal
            </button>
        </div>
        {{/if}}
    </div>
    <div class="row">
        {{!-- Load all meals from db --}}
        {{#if session.user.admin}}
        {{#each meals}}
        <div class="col-sm-6"> 
            <div class="meal">
                <a href="/menu/delete/{{_id}}" onclick="return confirm('Are you sure you want to delete this meal?');"><button type="button" class="close" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button></a>

                <img src="/images/uploaded/meals/{{image}}" alt="{{title}}" class="img-fluid food-img">
                <p class="food-name">{{title}}</p>
                <p>{{ingredients}}</p>
                <p class="price ">{{price}}</p>
            </div>
        </div>
        {{/each}}

        {{else}}
        {{#each meals}}
        <div class="col-sm-6">
            <div class="meal">
                <img src="/images/uploaded/meals/{{image}}" alt="{{title}}" class="img-fluid">
                <p class="food-name">{{title}}</p>
                <p>{{ingredients}}</p>
                <p class="price ">{{price}}</p>
            </div>
        </div>
        {{/each}}
        {{/if}}
    </div>
</div>


{{!-- New Meal Modal --}}
<div class="modal" id="addModal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add A New Meal</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="d-flex flex-column text-center">
                    <form action="/addMeal" method="POST" enctype="multipart/form-data">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <input class="form-control" id="imageFile" name="imageFile" type="file"
                                        placeholder="Insert The Meal Image" />
                                </div>
                                <div class="form-group">
                                    <input class="form-control" id="title" name="title" type="text"
                                        placeholder="Insert The Meal Title" />
                                </div>
                                <div class="form-group">
                                    <input class="form-control" id="ingredients" name="ingredients" type="text"
                                        placeholder="Insert The Meal Ingredients" />
                                </div>
                                <div class="form-group">
                                    <input class="form-control" id="desc" name="desc" type="text"
                                        placeholder="Insert The Meal Description" />
                                </div>
                                <div class="form-group">
                                    <input class="form-control" id="category" name="category" type="text"
                                        placeholder="Insert The Meal Category" />
                                </div>
                                <div class="form-group">
                                    <input class="form-control" id="price" name="price" type="number" min="1"
                                        placeholder="Insert The Meal Price" />
                                </div>
                                <div class="form-group">
                                    <input class="form-control" id="cookTime" name="cookTime" type="number"
                                        placeholder="Insert The Meal Cook Time" />
                                </div>
                                <div class="form-group">
                                    <input class="form-control" id="cal" name="cal" type="number"
                                        placeholder="Insert The Meal Calories" />
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" id="topMeal" name="topMeal" type="checkbox" />
                                    <label class="form-check-label" for="topMeal">Is it a top meal?</label>
                                </div>

                            </div>
                        </div>

                </div>
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-primary">Save changes</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
</div>